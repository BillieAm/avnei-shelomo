---
import {
  getLangFromUrl,
  useTranslations,
  useTranslatedPath,
} from "../i18n/utils";

import NavMobile from "@components/NavMobile";
import LanguagePicker from "@components/LanguagePicker.astro";
import Link from "@components/Link.astro";

import { Image } from "astro:assets";

// logos imports
import LogoAvneiEn from "../assets/logo/avnei-shelomo_en.webp";
import LogoAvneiHe from "../assets/logo/avnei-shelomo_he.webp";
import LogoChasadaiEn from "../assets/logo/chasadai-gavriel_en.webp";
import LogoChasadaiHe from "../assets/logo/chasadai-gavriel_he.webp";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const translatePath = useTranslatedPath(lang);

const logoAvnei = lang === "he" ? LogoAvneiHe : LogoAvneiEn;
const logoChasadai = lang === "he" ? LogoChasadaiHe : LogoChasadaiEn;

const translatedRouts = [
  { name: t("nav.home"), path: translatePath("/") },
  { name: t("nav.about"), path: translatePath("/about/") },
  { name: t("nav.lessons"), path: translatePath("/lessons/") },
  { name: t("nav.gallery"), path: translatePath("/gallery/") },
  { name: t("nav.donate"), path: translatePath("/donate") },
];
---

<header class="bg-background-nav px-6 py-2 text-lg text-frontGround-white">
  <div class="mx-auto flex max-w-6xl items-center justify-between">
    <!-- Logos -->
    <div class="">
      <a
        href={translatePath("/")}
        aria-label={t("logo.ariaLabel")}
        class="flex gap-4"
      >
        <Image src={logoAvnei} alt="Avnei Shelomo" height={70} />
        <Image src={logoChasadai} alt="Chasadai Gavriel" height={70} />
      </a>
    </div>

    <!-- Desktop Nav -->
    <nav class="hidden lg:block">
      <ul class="flex gap-12">
        {
          translatedRouts.map((route) => (
            <li>
              <a href={route.path} class="hover:text-accent">
                {route.name}
              </a>
            </li>
          ))
        }
      </ul>
    </nav>

    <div class="flex items-center gap-12">
      <!-- Language and contacts buttons -->
      <div class="hidden items-center gap-10 md:flex">
        <LanguagePicker />
        <Link
          href="#contact"
          text={t("header.contact")}
          class="bg-accent text-frontGround"
        />
      </div>
      <!-- Mobile Nav -->
      <div class="lg:hidden">
        <NavMobile routesList={translatedRouts} client:load />
      </div>
    </div>
  </div>
</header>
